!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class a{static getFrame(e){const t=document.createElement("div");t.setAttribute("class","frame");const n=document.createElement("div");n.setAttribute("class","frame-number"),n.innerText=e;const a=document.createElement("div");a.setAttribute("class","delete-frame");const r=document.createElement("div");r.setAttribute("class","copy-frame");const s=document.createElement("canvas");return s.setAttribute("class","frame-canvas"),s.setAttribute("height","500"),s.setAttribute("width","500"),t.appendChild(n),t.appendChild(a),t.appendChild(r),t.appendChild(s),t}}function r(e){return document.querySelector(e)}(class{static start(){const{body:e}=document;e.innerHTML='\n        <header class="header">\n            <div class="menu-button"></div>\n            <h1 class="header-h1">CodeJam - Animation Player</h1>\n            <div class="context-menu"></div>\n        </header>\n        <main class="main">\n            <div class="frames-wrapper">\n                <button class="new-frame-button">Add new frame</button>\n            </div>\n            <div class="canvas-wrapper">\n                <canvas class="main-canvas" height="500" width="500"></canvas>\n            </div>\n            <div class="preview-wrapper">\n                <div class="animation">\n                    <canvas class="animation-canvas" height="500" width="500"></canvas>\n                </div>\n                <input class="range" type="range" min="1" max="24" step="1" value="0">\n                <div class="tooltip">0 fps</div>\n                <button class="full-screen-button">Full screen</button>\n            </div>\n        </main>\n    ';const t=document.querySelector(".new-frame-button"),n=document.querySelector(".frames-wrapper"),r=a.getFrame(1);r.classList.add("active-frame"),n.insertBefore(r,t)}}).start();const s=r(".range"),i=r(".tooltip"),c=r(".main-canvas"),o=r(".frames-wrapper"),l=r(".full-screen-button"),d=r(".animation-canvas"),u=c.getContext("2d");function f(e,t){const n=e.getContext("2d").getImageData(0,0,500,500);t.getContext("2d").putImageData(n,0,0,0,0,500,500)}let m;function v(){let e=1;[...r(".frames-wrapper").children].map(e=>[...e.children].filter(e=>e.classList.contains("frame-number"))).flat().forEach(t=>{t.innerText=e,e+=1})}s.addEventListener("change",e=>{i.innerText=`${e.target.value} fps`,function(e,t){void 0!==m&&clearInterval(m);let n=0;m=setInterval(function(){n>=e.length&&(n=0),f(e[n],d),n+=1},1e3/t)}([...r(".frames-wrapper").children].slice(0,-1).map(e=>[...e.children]).flat().filter(e=>"CANVAS"===e.tagName),e.target.value)});let p=!1;c.addEventListener("mousedown",()=>{p=!0}),c.addEventListener("mouseup",()=>{p=!1,u.beginPath();const e=r(".frames-wrapper").querySelector(".active-frame").querySelector("canvas");f(c,e)}),c.addEventListener("mousemove",e=>{if(p){!function(e,t){u.lineTo(e,t),u.lineWidth=10,u.stroke(),u.beginPath(),u.arc(e,t,5,0,2*Math.PI),u.fill(),u.beginPath(),u.moveTo(e,t)}(e.pageX-c.parentNode.offsetLeft,e.pageY-c.parentNode.offsetTop)}}),o.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("frame")||t.classList.contains("frame-canvas")){if([...r(".frames-wrapper").children].forEach(e=>{e.classList.remove("active-frame")}),t.classList.contains("frame-canvas"))t.parentNode.classList.add("active-frame"),f(t,c);else{t.classList.add("active-frame"),f(t.querySelector("canvas"),c)}}else if(t.classList.contains("new-frame-button")){const e=a.getFrame(o.children.length);o.insertBefore(e,t)}else if(t.classList.contains("delete-frame")){if(o.children.length<3)return t.parentNode.classList.add("active-frame"),void f(t.parentNode.querySelector("canvas"),c);o.removeChild(t.parentNode),v()}else if(t.classList.contains("copy-frame")){const e=t.parentNode.querySelector("canvas"),n=t.parentNode.cloneNode(!0);f(e,n.querySelector("canvas")),o.insertBefore(n,t.parentNode.nextSibling),t.parentNode.classList.remove("active-frame"),v()}}),l.addEventListener("click",()=>{d.webkitRequestFullScreen(),d.style.backgroundColor="#ffffff"})}]);